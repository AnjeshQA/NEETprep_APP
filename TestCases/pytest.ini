[pytest]
# --- EXECUTION SETTINGS ---
# -ra: show extra test summary info
# --strict-markers: prevents typos in marker names
# --tb=short: keeps Jenkins console logs clean and readable
addopts = -ra --strict-markers --tb=short --alluredir=allure-report

# --- TEST DISCOVERY ---
# This ensures pytest doesn't waste time looking in .venv or other folders
testpaths = TestCases
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# --- MARKERS ---
markers =
    functional: mark for functional tests
    regression: mark for full regression suite
    sanity: mark for quick health checks
    flaky: mark test to re-run on failure

# --- TIMEOUTS (Crucial for Jenkins) ---
# Prevents the "Infinite Loop" you experienced.
# Requires 'pytest-timeout' plugin. Each test must finish in 5 mins.
timeout = 300

# --- LOGGING CONFIGURATION ---
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S